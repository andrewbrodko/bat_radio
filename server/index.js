const express = require('express');
const cors = require('cors');
const body_parser = require('body-parser');
const app = express();
const https = require("https");

const TRACKS = [{"id":9408,"bit_author":null,"desc":null,"img":null,"meta1":null,"name":"ib17_r1_Iamjmarr_d8b5f17.mp3","path":"/upload/music/ib17_r1_Iamjmarr_d8b5f17.mp3","round_id":1,"status":1,"user_id":9408,"rating_sum":2,"userRating":null,"user":{"username":"Iamjmarr","profile":{"location":"Южно-Сахалинск","name":null}},"ratings":[{"id":23113,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":25231,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"garigudini","name":"Гари Гудини"}},{"id":29031,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"bovee","name":"БоВи"}},{"id":31350,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Miou","name":"Miou "}},{"id":54341,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Pashkevich","name":"Пашкевич"}}],"judge_rating_sum":24},{"id":206,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":49,"name":"ИСТ - В долгий путь.mp3"},"name":"ib17_r1_afrika_rulit_ss_4f64c21.mp3","path":"/upload/music/ib17_r1_afrika_rulit_ss_4f64c21.mp3","round_id":1,"status":1,"user_id":207,"rating_sum":3,"userRating":null,"user":{"username":"afrika_rulit_ss","profile":{"location":"Москва","name":"ИСТ"}},"ratings":[{"id":13351,"status":1,"params_json":{"grade":5,"comment":"Приятно слушается. В том, что ты говоришь, чувствуется искренность. "},"judge":{"username":"Pashkevich","name":"Пашкевич"}},{"id":14445,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Vla-da","name":"Вла-Да"}},{"id":26947,"status":1,"params_json":{"grade":5,"comment":"Это круто!"},"judge":{"username":"Light_M","name":"Light_M"}},{"id":27671,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Miou","name":"Miou "}},{"id":30807,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"RapAnalyst","name":"Rap Analyst"}}],"judge_rating_sum":24},{"id":997,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":50,"name":"If - в долгий путь (17ib).mp3"},"name":"ib17_r1_martinich1991_6f7c0c0.mp3","path":"/upload/music/ib17_r1_martinich1991_6f7c0c0.mp3","round_id":1,"status":1,"user_id":998,"rating_sum":3,"userRating":null,"user":{"username":"If_","profile":{"location":"Иваново","name":"If"}},"ratings":[{"id":3824,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":17435,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"AutoChess","name":"Очередной"}},{"id":20622,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"afictionalperson","name":"Выдуманный"}},{"id":49507,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Pashkevich","name":"Пашкевич"}},{"id":51566,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"SANCHEZ","name":"Александр Петров"}}],"judge_rating_sum":24},{"id":1765,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":50,"name":"Kasper - battle !.mp3"},"name":"ib17_r1_1988kasper_6c304a7.mp3","path":"/upload/music/ib17_r1_1988kasper_6c304a7.mp3","round_id":1,"status":1,"user_id":1766,"rating_sum":6,"userRating":null,"user":{"username":"1988kasper","profile":{"location":"Владивосток","name":"Kasper"}},"ratings":[{"id":5420,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"SANCHEZ","name":"Александр Петров"}},{"id":5421,"status":1,"params_json":{"grade":5,"comment":"Идеально звучит на этом бите. 5 из 5. Лайтовый, но нешаблонный текст. "},"judge":{"username":"Miou","name":"Miou "}},{"id":5422,"status":1,"params_json":{"grade":4,"comment":"Сильная и стильная заявка."},"judge":{"username":"AutoChess","name":"Очередной"}},{"id":5423,"status":1,"params_json":{"grade":5,"comment":"Один из лучших пока."},"judge":{"username":"Light_M","name":"Light_M"}},{"id":14871,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"BenArfa","name":"Бен Арфа"}}],"judge_rating_sum":24},{"id":6631,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":48},"name":"ib17_r1_PashaMorgan_ffca748.mp3","path":"/upload/music/ib17_r1_PashaMorgan_ffca748.mp3","round_id":1,"status":1,"user_id":6817,"rating_sum":6,"userRating":null,"user":{"username":"PashaMorgan","profile":{"location":"Братск","name":"Паша Морган"}},"ratings":[{"id":8477,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Aspid","name":"Aspid"}},{"id":11781,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Miou","name":"Miou "}},{"id":11932,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"BenArfa","name":"Бен Арфа"}},{"id":18791,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":24121,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"garigudini","name":"Гари Гудини"}}],"judge_rating_sum":24},{"id":6633,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":50},"name":"ib17_r1_Nervniy_3532bb7.mp3","path":"/upload/music/ib17_r1_Nervniy_3532bb7.mp3","round_id":1,"status":1,"user_id":6821,"rating_sum":6,"userRating":null,"user":{"username":"Nervniy","profile":{"location":"Nsk","name":"Nervniy"}},"ratings":[{"id":9639,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Miou","name":"Miou "}},{"id":11703,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"AutoChess","name":"Очередной"}},{"id":15547,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":19579,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"garigudini","name":"Гари Гудини"}},{"id":22386,"status":1,"params_json":{"grade":5,"comment":"спасибо"},"judge":{"username":"MOZG","name":null}}],"judge_rating_sum":24},{"id":7931,"bit_author":null,"desc":null,"img":null,"meta1":null,"name":"ib17_r1_playingtheangel_a382704.mp3","path":"/upload/music/ib17_r1_playingtheangel_a382704.mp3","round_id":1,"status":1,"user_id":7931,"rating_sum":4,"userRating":null,"user":{"username":"playingtheangel","profile":{"location":"Санкт-Петербург","name":"playingtheangel"}},"ratings":[{"id":23067,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Denya_Stish","name":"Denya Stish"}},{"id":23087,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":29793,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"BenArfa","name":"Бен Арфа"}},{"id":32952,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Paradise","name":null}},{"id":51685,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"afictionalperson","name":"Выдуманный"}}],"judge_rating_sum":24},{"id":4361,"bit_author":"ЧЕТ4РЕ","desc":null,"img":null,"meta1":{"duration":49},"name":"ib17_r1_kussani_01ce9c1.mp3","path":"/upload/music/ib17_r1_kussani_01ce9c1.mp3","round_id":1,"status":1,"user_id":4469,"rating_sum":2,"userRating":null,"user":{"username":"kussani","profile":{"location":"Другой","name":"kussani"}},"ratings":[{"id":5997,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"BenArfa","name":"Бен Арфа"}},{"id":8168,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":19123,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Miou","name":"Miou "}},{"id":21164,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"afictionalperson","name":"Выдуманный"}},{"id":28866,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"bovee","name":"БоВи"}}],"judge_rating_sum":23},{"id":8969,"bit_author":null,"desc":null,"img":null,"meta1":null,"name":"ib17_r1_KolyaManyu_f1cfd56.mp3","path":"/upload/music/ib17_r1_KolyaManyu_f1cfd56.mp3","round_id":1,"status":1,"user_id":8969,"rating_sum":1,"userRating":null,"user":{"username":"KolyaManyu","profile":{"location":"Москва","name":"Коля Маню"}},"ratings":[{"id":23120,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":23294,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"RapAnalyst","name":"Rap Analyst"}},{"id":27043,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Miou","name":"Miou "}},{"id":30783,"status":1,"params_json":{"grade":5,"comment":"Это очень круто! "},"judge":{"username":"SANCHEZ","name":"Александр Петров"}},{"id":55831,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Aspid","name":"Aspid"}}],"judge_rating_sum":23},{"id":9496,"bit_author":null,"desc":null,"img":null,"meta1":null,"name":"ib17_r1_HYSKILLZ_92ef17c.mp3","path":"/upload/music/ib17_r1_HYSKILLZ_92ef17c.mp3","round_id":1,"status":1,"user_id":9496,"rating_sum":1,"userRating":null,"user":{"username":"HYSKILLZ","profile":{"location":"Тольятти","name":"HYSKILLZ(UNIVERSE)"}},"ratings":[{"id":29637,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"AutoChess","name":"Очередной"}},{"id":30683,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"SANCHEZ","name":"Александр Петров"}},{"id":39608,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Paradise","name":null}},{"id":51930,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"RapAnalyst","name":"Rap Analyst"}},{"id":55464,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Aspid","name":"Aspid"}}],"judge_rating_sum":23},{"id":8733,"bit_author":null,"desc":null,"img":null,"meta1":null,"name":"ib17_r1_FLAME13OY_08b5b5d.mp3","path":"/upload/music/ib17_r1_FLAME13OY_08b5b5d.mp3","round_id":1,"status":1,"user_id":8733,"rating_sum":4,"userRating":null,"user":{"username":"FLAME13OY","profile":{"location":"Астрахань","name":"FLAME13OY"}},"ratings":[{"id":24471,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Pashkevich","name":"Пашкевич"}},{"id":25046,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"BenArfa","name":"Бен Арфа"}},{"id":26965,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Miou","name":"Miou "}},{"id":30084,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Aspid","name":"Aspid"}},{"id":32680,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}}],"judge_rating_sum":23},{"id":3115,"bit_author":"prod. Ohmylord!","desc":null,"img":null,"meta1":{"duration":49},"name":"ib17_r1_Berlov_c77a5c0.mp3","path":"/upload/music/ib17_r1_Berlov_c77a5c0.mp3","round_id":1,"status":1,"user_id":2933,"rating_sum":5,"userRating":null,"user":{"username":"Berlov","profile":{"location":"Иркутск","name":"Berlov"}},"ratings":[{"id":1392,"status":1,"params_json":{"grade":5,"comment":"Звучит классно. Хотелось бы более баттловые вещи наверное видеть от участников, но достойно, между 4 и 5 сомневался.Но ты очень музыкальный это подкупило, классный вокал."},"judge":{"username":"R1Fmabes","name":"r1fmabes[#2Типа]"}},{"id":7069,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":10772,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"RapAnalyst","name":"Rap Analyst"}},{"id":11639,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"AutoChess","name":"Очередной"}},{"id":16075,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"afictionalperson","name":"Выдуманный"}}],"judge_rating_sum":23},{"id":812,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":49,"name":"GaoDagamo - В долгий путь (BEATMAGIK music).mp3"},"name":"ib17_r1_gaodagamo_583279a.mp3","path":"/upload/music/ib17_r1_gaodagamo_583279a.mp3","round_id":1,"status":1,"user_id":813,"rating_sum":5,"userRating":null,"user":{"username":"gaodagamo","profile":{"location":"39","name":"GaoDagamo"}},"ratings":[{"id":3413,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":3414,"status":1,"params_json":{"grade":5,"comment":"Оценка говорит сама за себя"},"judge":{"username":"Paradise","name":null}},{"id":16681,"status":1,"params_json":{"grade":4,"comment":"ну этот трек  мы на стриме слушали)"},"judge":{"username":"TimeBusters","name":"Time Busters"}},{"id":18010,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"SANCHEZ","name":"Александр Петров"}},{"id":26961,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Miou","name":"Miou "}}],"judge_rating_sum":23},{"id":559,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":49,"name":"Freid - В Долгий Путь.mp3"},"name":"ib17_r1_kesha.kuleshov.89_d417c52.mp3","path":"/upload/music/ib17_r1_kesha.kuleshov.89_d417c52.mp3","round_id":1,"status":1,"user_id":560,"rating_sum":1,"userRating":null,"user":{"username":"kesha.kuleshov.89","profile":{"location":"Камчатка","name":"Freid"}},"ratings":[{"id":2803,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"afictionalperson","name":"Выдуманный"}},{"id":2804,"status":1,"params_json":{"grade":5,"comment":"Без комментариев, круто"},"judge":{"username":"Paradise","name":null}},{"id":11335,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"RapAnalyst","name":"Rap Analyst"}},{"id":15165,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":18572,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Aspid","name":"Aspid"}}],"judge_rating_sum":23},{"id":5957,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":49},"name":"ib17_r1_ZagiBock_4d61298.mp3","path":"/upload/music/ib17_r1_ZagiBock_4d61298.mp3","round_id":1,"status":1,"user_id":6112,"rating_sum":7,"userRating":null,"user":{"username":"ZagiBock","profile":{"location":"Москва","name":"Заги Бок"}},"ratings":[{"id":8862,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"BenArfa","name":"Бен Арфа"}},{"id":11716,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":14153,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"garigudini","name":"Гари Гудини"}},{"id":23587,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"AutoChess","name":"Очередной"}},{"id":27482,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Miou","name":"Miou "}}],"judge_rating_sum":23},{"id":4180,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":49},"name":"ib17_r1_ZLOIMALOI_21b4200.mp3","path":"/upload/music/ib17_r1_ZLOIMALOI_21b4200.mp3","round_id":1,"status":1,"user_id":4280,"rating_sum":5,"userRating":null,"user":{"username":"ZLOIMALOI","profile":{"location":"Новокузнецк ","name":"ЗЛОЙ МАЛОЙ"}},"ratings":[{"id":1949,"status":1,"params_json":{"grade":5,"comment":"Лично я даже после третьего прослушивания посмеялся с этого трека. Для отбора это вполне сойдет. Бодро, весело, качево. Спасибо, что Окси разрешил вам всем сдать трек на баттл) Однако, такой стиль не дойдет дальше третьего-четвертого раунда, быстро всем надоест. Если в парных раундах начнешь удивлять, будет превосходно. А пока это пять. "},"judge":{"username":"Pashkevich","name":"Пашкевич"}},{"id":1950,"status":1,"params_json":{"grade":4,"comment":"Эпатажные панчи, hah. Исполнение, текст, рифмы - все на уровне. "},"judge":{"username":"Miou","name":"Miou "}},{"id":11778,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"AutoChess","name":"Очередной"}},{"id":12787,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Aspid","name":"Aspid"}},{"id":15045,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"garigudini","name":"Гари Гудини"}}],"judge_rating_sum":23},{"id":2390,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":49},"name":"ib17_r1_Freddy_614f817.mp3","path":"/upload/music/ib17_r1_Freddy_614f817.mp3","round_id":1,"status":1,"user_id":2223,"rating_sum":3,"userRating":null,"user":{"username":"Freddy","profile":{"location":"Москва","name":"Фредди К."}},"ratings":[{"id":471,"status":1,"params_json":{"grade":5,"comment":"хуяссе ты залетел! у меня аж волосы вспыхнули на жопе. слушать такое в плейре не стал бы, но в рамках критериев на отбор - вопросянов нет к тебе. лови пятулю звёздную."},"judge":{"username":"MOZG","name":null}},{"id":472,"status":1,"params_json":{"grade":5,"comment":"Грязный Ра-Мир ес"},"judge":{"username":"Paradise","name":null}},{"id":8322,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":10009,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Aspid","name":"Aspid"}},{"id":52568,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"BenArfa","name":"Бен Арфа"}}],"judge_rating_sum":23},{"id":9579,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":50},"name":"ib17_r1_Rem_digga_3385391.mp3","path":"/upload/music/ib17_r1_Rem_digga_3385391.mp3","round_id":1,"status":1,"user_id":9579,"rating_sum":5,"userRating":null,"user":{"username":"Rem_digga","profile":{"location":"Гуково ","name":"Рем Дигга"}},"ratings":[{"id":24701,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}},{"id":26623,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Aspid","name":"Aspid"}},{"id":28642,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"AutoChess","name":"Очередной"}},{"id":29115,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"bovee","name":"БоВи"}},{"id":30935,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"VERS2","name":"VERS2"}}],"judge_rating_sum":23},{"id":9596,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":49},"name":"ib17_r1_Pastor_Napas_2da133e.mp3","path":"/upload/music/ib17_r1_Pastor_Napas_2da133e.mp3","round_id":1,"status":1,"user_id":9596,"rating_sum":0,"userRating":null,"user":{"username":"Pastor_Napas","profile":{"location":"Танкоград","name":"Pastor Napas"}},"ratings":[{"id":28033,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Miou","name":"Miou "}},{"id":35653,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"SANCHEZ","name":"Александр Петров"}},{"id":35661,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"VERS2","name":"VERS2"}},{"id":39639,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"Paradise","name":null}},{"id":52509,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"BenArfa","name":"Бен Арфа"}}],"judge_rating_sum":23},{"id":3218,"bit_author":null,"desc":null,"img":null,"meta1":{"duration":49},"name":"ib17_r1_FLOWPACK_adc4d8b.mp3","path":"/upload/music/ib17_r1_FLOWPACK_adc4d8b.mp3","round_id":1,"status":1,"user_id":3157,"rating_sum":3,"userRating":null,"user":{"username":"FLOWPACK","profile":{"location":"INSTERBURG","name":"FLOWPACK "}},"ratings":[{"id":1456,"status":1,"params_json":{"grade":5,"comment":"Никаких долгих интро, никакой раскачки, с первых секунд и до конца звучит мощно и уверенно на бите, качественный трэк."},"judge":{"username":"Miou","name":"Miou "}},{"id":1457,"status":1,"params_json":{"grade":5,"comment":"Оценка говорит сама за себя. "},"judge":{"username":"Paradise","name":null}},{"id":11633,"status":1,"params_json":{"grade":5,"comment":""},"judge":{"username":"AutoChess","name":"Очередной"}},{"id":18188,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Pnd","name":null}},{"id":22531,"status":1,"params_json":{"grade":4,"comment":""},"judge":{"username":"Light_M","name":"Light_M"}}],"judge_rating_sum":23}];

app.use(cors());
app.use(body_parser());

app.get('/api/data', (req, res) => {
	var query = [];
	for (var prop in req.query) {
		query.push(prop + "=" + req.query[prop]);
	}
	const url = `https://ib17.hip-hop.ru/api/round/table?${query.join("&")}`;
	https.get(url, result => {
		result.setEncoding("utf8");
		let body = "";

		result.on("data", (data) => {
			body += data;
		});
		result.on("end", () => {
			body = JSON.parse(body);
			return res.json(body);
		});
	});
});

app.get('/api/trackinfo', (req, res) => {
	let trackid = req.query['id'];
	return res.json(TRACKS[trackid]);
});

app.listen(4000, () => {
	console.log('server is listening on http://localhost:4000/');
});